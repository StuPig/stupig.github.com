<div class="highlight"><pre><span class="cp">&lt;!DOCTYPE HTML&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">&quot;en&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">&quot;UTF-8&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;title&gt;</span>backbone<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href=</span><span class="s">&quot;css/reset.css&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;js/lib/zepto.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;js/lib/datastorage.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;js/lib/underscore.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;js/lib/backbone.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;script&gt;</span>
      <span class="c1">// ROOT_URL = &#39;http://www.gsqmt.dev.sankuai.com/api/v4/dealasync&#39;;</span>
      <span class="kd">var</span> <span class="nx">ROOT_URL</span> <span class="o">=</span> <span class="s1">&#39;/backbone/webservice/deals.php&#39;</span><span class="p">;</span>
 
      <span class="nx">Backbone</span><span class="p">.</span><span class="nx">emulateHTTP</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
      <span class="nx">Backbone</span><span class="p">.</span><span class="nx">emulateJSON</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
 
      <span class="kd">var</span> <span class="nx">Deals</span> <span class="o">=</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Collection</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
        <span class="nx">model</span><span class="o">:</span> <span class="nx">Deal</span>
        <span class="p">,</span> <span class="nx">url</span><span class="o">:</span> <span class="nx">ROOT_URL</span>
        <span class="p">,</span> <span class="nx">parse</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="k">new</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">});</span>
 
      <span class="kd">var</span> <span class="nx">deals</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Deals</span><span class="p">();</span>
      <span class="nx">deals</span><span class="p">.</span><span class="nx">fetch</span><span class="p">({</span>
        <span class="nx">dataType</span><span class="o">:</span> <span class="s1">&#39;json&#39;</span>
        <span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;GET&#39;</span>
        <span class="p">,</span> <span class="nx">url</span><span class="o">:</span> <span class="nx">ROOT_URL</span>
        <span class="p">,</span> <span class="nx">data</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">ws_path</span><span class="o">:</span> <span class="s1">&#39;/path/to/service&#39;</span>
          <span class="p">,</span> <span class="nx">division</span><span class="o">:</span> <span class="s1">&#39;北京&#39;</span>
          <span class="p">,</span> <span class="nx">cate</span><span class="o">:</span> <span class="s1">&#39;1,2,3,4,5&#39;</span>
          <span class="p">,</span> <span class="nx">limit</span><span class="o">:</span> <span class="mi">5</span>
          <span class="p">,</span> <span class="nx">group</span><span class="o">:</span> <span class="mi">1</span>
        <span class="p">}</span>
        <span class="p">,</span> <span class="nx">success</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">collection</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
          <span class="c1">// console.log(collection, res)</span>
          <span class="c1">// deals.add(res.new);</span>
        <span class="p">}</span>
      <span class="p">});</span>
    <span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre>
</div>
